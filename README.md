# Xijum Weapon System - v0.0.6

A comprehensive weapon system for Roblox built with Rojo, featuring client-server architecture, camera handling, animations, and modular weapon configurations.

Generated by [Rojo](https://github.com/rojo-rbx/rojo) 7.7.0-rc.1.

## Getting Started

To build the place from scratch, use:

```bash
rojo build -o "xijum-weapon-system.rbxlx"
```

Next, open `xijum-weapon-system.rbxlx` in Roblox Studio and start the Rojo server:

```bash
rojo serve
```

For more help, check out [the Rojo documentation](https://rojo.space/docs).

## Project Structure

```
Xijum-Weapon-System/
│
├─ aftman.toml                    - Aftman tool version manager
├─ default.project.json           - Rojo project configuration
├─ selene.toml                    - Selene linter configuration
├─ sourcemap.json                 - Source map for debugging
├─ LICENSE.md                     - Xijum Open Technology License
├─ README.md                      - This file
│
├─ frameworks/
│  └─ CameraFramework/            - External camera framework
│
└─ src/
   ├─ ReplicatedStorage/
   │  └─ Xijum/
   │     └─ WeaponSystem/
   │        ├─ RemotesDefinitions.luau    - Defines remote event names as constants
   │        │
   │        ├─ Core/
   │        │  ├─ Bullet.luau             - Bullet entity with trajectory and collision
   │        │  ├─ Camera.luau             - Handles OTS/Orbital camera modes
   │        │  ├─ Raycast.luau            - Raycast-based hit detection
   │        │  ├─ Recoil.luau             - Weapon recoil system
   │        │  ├─ Spread.luau             - Bullet spread calculations
   │        │  └─ WeaponController.luau   - Server-side weapon control and state
   │        │
   │        └─ Weapons/
   │           ├─ README.md               - Weapon configuration guide
   │           └─ XijumConfig.luau        - Weapon configuration template
   │
   ├─ ServerScriptService/
   │  └─ Xijum/
   │     └─ WeaponServer/
   │        ├─ DamageService.luau         - Handles damage application with system support
   │        ├─ HitValidation.luau         - Validates hit detection with system support
   │        ├─ RemotesServer.server.luau  - Sets up remote events and basic handlers
   │        ├─ WeaponService.luau         - Main server weapon handling system
   │        └─ debug.server.luau          - Debug utilities
   │
   └─ StarterPlayer/
      └─ StarterPlayerScripts/
         └─ Xijum/
            ├─ DebugControls.client.luau - Debug input controls
            │
            └─ WeaponClient/
               ├─ AnimationHandler.luau   - Manages weapon animations
               ├─ init.client.luau        - Client initialization
               └─ WeaponClient.luau       - Main client-side weapon controller
```

## Component Descriptions

### Client-Side (`StarterPlayerScripts/Xijum`)

- **WeaponClient.luau**: Core client-side weapon controller
  - Weapon equipping/unequipping with UUID tracking
  - Firing logic with RPM-based fire rate control
  - Aiming state management with camera mode switching
  - Reload requests and animations
  - Input binding (Mouse1/Mouse2 for fire/aim, R for reload)
  - Camera mode switching (Orbital for normal, OTS for aiming)
  - Sound playback (local and server-replicated)
  - Fire mode toggling

- **AnimationHandler.luau**: Manages weapon animations
  - Loads and plays animations (Equip, Fire, Reload, Aim, Firemode, Unequip)
  - Controls animation playback speed and states

- **DebugControls.client.luau**: Debug input controls for testing

- **init.client.luau**: Initializes the weapon client on spawn
  - Sets up input binding
  - Connects character death events

### Server-Side (`ServerScriptService/Xijum/WeaponServer`)

- **WeaponService.luau**: Main server-side weapon system
  - Initializes `WeaponController` for each player
  - Routes remote events to appropriate handlers
  - Manages player weapon state

- **RemotesServer.server.luau**: Remote event setup
  - Creates all weapon remotes (Equip, Fire, Reload, Aim, Firemode, Unequip)
  - Hooks basic event handlers for logging

- **DamageService.luau**: Damage application with modular system support
  - Detects compatible Xijum systems (XijumHealth, etc.)
  - Falls back to standard Humanoid damage if no custom system found
  - `ApplyDamage(data, damage)` for applying damage to hit targets

- **HitValidation.luau**: Hit detection validation
  - Registers compatible Xijum systems for custom hit validation
  - Falls back to Humanoid detection if no custom system found
  - `HitValidationDetection(hitPart)` for validating hits

- **debug.server.luau**: Debug utilities for testing

### Core Systems (`ReplicatedStorage/Xijum/WeaponSystem`)

- **WeaponController.luau**: Server-side weapon state controller per player
  - Weapon equipping/unequipping
  - Fire logic with raycast hit detection
  - Ammo tracking per weapon
  - Reload state management
  - Aiming state management
  - Bullet creation and lifecycle management

- **Bullet.luau**: Bullet entity system
  - Physics-based movement with configurable speed/lifetime
  - Hit detection with pierce support
  - Damage application on impact
  - Visual representation

- **Camera.luau**: Advanced camera system
  - Orbital mode (third-person)
  - Over-The-Shoulder (OTS) aiming mode
  - Smooth transitions between modes
  - Recoil and spread integration

- **Raycast.luau**: Raycast-based hit detection
  - Performs raycasts with exclusion lists
  - Returns hit information for damage processing

- **Recoil.luau**: Weapon recoil system
  - Vertical and horizontal recoil application
  - Recoil recovery with configurable return speed

- **Spread.luau**: Bullet spread calculations
  - Hip-fire vs aiming spread
  - Movement penalty modifier support

- **RemotesDefinitions.luau**: Remote event name constants
  - Prevents typos and centralizes event naming
  - Shared between client and server

### Configuration

- **XijumConfig.luau**: Weapon configuration template (placed in weapon tools)
  - Animations (Equip, Fire, Reload, Aim, Firemode, Unequip IDs)
  - Sounds (Equip, Fire, Reload, Aim sounds)
  - FireMode array (e.g., {"Auto", "Burst", "Semi"})
  - FireRate (RPM)
  - Range (raycast distance)
  - Damage and pierce settings
  - Magazine size and reload time
  - Recoil and spread values
  - Camera settings (offsets, FOV, etc.)

## Features

- ✅ **UUID-based weapon tracking**: Each weapon instance has a unique identifier for multi-gun support
- ✅ **Client-side prediction**: Responsive firing with server-side validation
- ✅ **Advanced camera system**: Smooth transitions between orbital and OTS aiming modes
- ✅ **Modular configuration**: Per-weapon customization through config files in weapon tools
- ✅ **Animation system**: Integrated animation handling for equip, fire, reload, etc.
- ✅ **Fire rate control**: RPM-based fire rate limiting
- ✅ **Reload system**: Reload mechanics with animation and ammo management
- ✅ **Aiming mechanics**: Toggle aiming with camera mode switching
- ✅ **Recoil system**: Configurable vertical and horizontal recoil with recovery
- ✅ **Bullet spread**: Hip-fire vs aiming spread with movement penalties
- ✅ **Hit detection**: Raycast-based with server-side validation
- ✅ **Damage system**: Modular damage application with Xijum system support
- ✅ **System compatibility**: Supports other Xijum systems (Health, etc.)

## Remote Events

All remotes are defined in `RemotesDefinitions.luau` and created in `RemotesServer.server.luau`:

- `Xijum_WeaponEquip` - Sent when player equips a weapon
- `Xijum_WeaponFire` - Sent when player fires (includes origin, direction, timestamp)
- `Xijum_WeaponReload` - Sent when player reloads
- `Xijum_WeaponAim` - Sent when aiming state changes (true/false)
- `Xijum_WeaponFiremodeChange` - Sent when fire mode is toggled
- `Xijum_WeaponUnequip` - Sent when player unequips a weapon
- `Xijum_WeaponSound` - Sent for server-replicated sounds

## Xijum Open Technology License (XOTL)

This project is licensed under the **Xijum Open Technology License (XOTL)**, which permits:

- **Free usage** in any Roblox group or game
- **Modifications** to suit your needs
- **Redistribution** with proper credit attribution
- **No warranty** provided as-is
- **No paid exclusivity** restrictions

For the full license text, see the `LICENSE` file in this repository.